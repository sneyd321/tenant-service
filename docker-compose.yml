version: '3.5'

services: 
    db-service:
        image: sneyd321/roomr-db-service
        depends_on: 
            - mysql
        ports: 
            - 8080:8080
        networks: 
            - roomr-network
        volumes:
            - ./orm-service:/usr/src/app 

        restart: on-failure
   

    mysql:
        image: mysql
        
        command: --init-file /data/application/init.sql
        volumes: 
            - ./mysql-volume/init/init.sql:/data/application/init.sql
            - ./mysql-volume/data:/var/lib/mysql

        environment:
            MYSQL_ROOT_PASSWORD: root
        cap_add:
            - SYS_NICE

        networks: 
            - roomr-network
            

networks: 
    roomr-network: